#!/bin/bash
# ┌────────────────────────────────────────────────────────────┐
# │ Type / Version : bash / 1.0.0.0-live                       │
# │ Author : Mark Hamilton │ Co-Pilot AI assisted              │
# │ Script Purpose : Full Kali Installer including Desktop     │
# │ Package : toolbox                                          │
# └────────────────────────────────────────────────────────────┘
# Usage:
#   tool-fki [update]
# Examples:
#   tool-fki
#   tool-fki update
# Description:
#   Installs the full Kali Suite (kali-linux-everything) including the default desktop environment all in a single step.
#   The update option (Recommended) ensures that all the packages in the installation are fully up to date.
#   If the tool-update is not installed or accessable then a stream lined update will be invoked.
# End Help

set -e

# ─────────────────────────────────────────────
# 🛠️ Phase 1: Baseline Prep via tool-update
# ─────────────────────────────────────────────
echo "[Phase 1] Running tool-update (if available)..."
if command -v update &>/dev/null; then
    tool-update --auto --log ~/tool-update.log
else
    sudo apt update
    echo "[Info] tool-update not found. Skipping baseline prep."
fi

# ─────────────────────────────────────────────
# 🧰 Phase 2: Install Full Kali Suite
# ─────────────────────────────────────────────
echo "[Phase 2] Installing kali-linux-everything..."
sudo apt install -y kali-linux-everything

# ─────────────────────────────────────────────
# 📋 Phase 3: Summary and Optional Reboot
# ─────────────────────────────────────────────
echo "[CyberCare] Installation complete."
echo "[Log] tool-update: ~/tool-update.log"
read -p "Reboot now to apply desktop environment? (y/n): " REBOOT
if [[ "$REBOOT" == "y" ]]; then
    sudo reboot
fi
